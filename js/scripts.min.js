var isMobile=$(window).width()<=768,url=window.location.href,crimes=[{name:"153A",url:"https://indiankanoon.org/doc/345634/"},{name:"153B",url:"https://indiankanoon.org/doc/771276/"},{name:"295",url:"https://indiankanoon.org/doc/305995/"},{name:"295A",url:"https://indiankanoon.org/doc/1803184/"},{name:"505(1)(c)",url:"https://indiankanoon.org/doc/1565692/"},{name:"505(2)",url:"https://indiankanoon.org/doc/1198526/"},{name:"505(3)",url:"https://indiankanoon.org/doc/584684/"},{name:"RPA 125",url:"https://indiankanoon.org/doc/28226194/"}];$.getJSON("data/pols2.json",function(a){function n(){var n=$(".control-sort select").val();return jz.arr.sortBy(a,n,"communal_cases"==n||"year"==n?"desc":"asc")}function o(){var a={};return $(".control-filter select").each(function(n,o){var e=$(o).attr("data-column"),t=$(o).val();"all"!=t&&(a[e]=t)}),0==Object.keys(a).length?(a=null,$(".clear-filters").addClass("inactive").removeClass("active")):$(".clear-filters").removeClass("inactive").addClass("active"),a}function e(){var a=n(),e=o();return e?_.where(a,e):a}function t(a){$(".pols-wrapper").empty(),a.forEach(function(a,n){$(".pols-wrapper").append("<div class='pol pol-"+n+"'></div>"),$(".pol-"+n).append("<div class='pol-photo'></div>"),$(".pol-"+n+" .pol-photo").append("<a target='_blank' href='"+a.url+"'><img src='"+url+"/img/pol/"+a.photo+"' /></a>"),$(".pol-"+n).append("<div class='pol-text'></div>"),$(".pol-"+n+" .pol-text").append("<a target='_blank' href='"+a.url+"'><div class='pol-name'>"+a.name+"</div></a>"),$(".pol-"+n+" .pol-text").append("<div class='pol-cases'>Accused in <span class='case-number'>"+a.communal_cases+"</span> communal "+(a.communal_cases>1?"cases":"case")+"</div>"),$(".pol-"+n+" .pol-text").append("<div class='pol-sub pol-party'><b>"+a.party_name+"</b></div>"),$(".pol-"+n+" .pol-text").append("<div class='pol-sub pol-description'>Elected in "+a.year+" as an "+a.pol_type+" from "+a.constituency+", "+a.state+"</div>"),$(".pol-"+n+" .pol-text").append("<div class='pol-sections-title'>Criminal sections</div>"),a.sections_unique.sort().forEach(function(a){$(".pol-"+n+" .pol-text").append("<a target='_blank' href='"+_.where(crimes,{name:a})[0].url+"'><div class='section'>"+a+"</div></a>")})}),l()}function l(){$(".pol-photo").each(function(a,n){var o=$(this).width();$(this).height(o)})}t(jz.arr.sortBy(a,"communal_cases","desc")),$(".control select").change(function(){t(e())}),_.chain(a).pluck("party_name").uniq().value().sort().map(function(n){var o={};return o.name=n,o.abbr=_.where(a,{party_name:n})[0].party_abbr,o}).forEach(function(a){$(".select-party").append("<option value='"+a.name+"'>"+(isMobile?a.abbr:a.name)+"</option>")}),_.chain(a).pluck("state").uniq().value().sort().forEach(function(a){$(".select-state").append("<option>"+a+"</option>")}),$(document).on("click",".clear-filters.active",function(){$(".control-filter select").each(function(a,n){$(this).val("all")}),t(e())}),l(),$(window).resize(l)});